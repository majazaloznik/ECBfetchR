% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_structure.R
\name{prepare_table_dimensions_table}
\alias{prepare_table_dimensions_table}
\title{Prepare ECB table dimensions metadata}
\usage{
prepare_table_dimensions_table(table_id, dims_list, con)
}
\arguments{
\item{table_id}{Integer. The table_id from platform.table for which to
prepare dimensions.}

\item{dims_list}{Named list. Output from \code{ecb::get_dimensions()} called
on one or more ECB series keys. Each element contains a data frame with
dimension names and values.}

\item{con}{Database connection object (e.g., from \code{DBI::dbConnect()}).}
}
\value{
A data frame with columns \code{table_id}, \code{dimension}, and
  \code{is_time} for dimensions that need to be inserted. Returns \code{NULL}
  if all dimensions already exist in the database.
}
\description{
Extracts unique key dimensions from ECB series (excluding attributes) and
checks which dimensions need to be inserted into the database. Only processes
dimensions that appear in the series keys, not metadata attributes like
COLLECTION, TITLE_COMPL, or UNIT.
}
\details{
The function determines which dimensions are "key dimensions" by counting the
number of dot-separated values in the series key (after the dataflow code).
For example, in the key "ICP.M.U2.N.000000.4.ANR", there are 6 dimension
values, so the first 6 dimensions from \code{get_dimensions()} output are
considered key dimensions. The remaining dimensions are attributes and are
excluded.

The function queries the database to identify which dimensions already exist
for the given table and only returns new dimensions that need to be inserted.
}
\examples{
\dontrun{
con <- DBI::dbConnect(...)
dims_list <- ecb::get_dimensions("ICP.M.U2.N.000000.4.ANR")

# Prepare dimensions for insertion
dims_to_insert <- prepare_ecb_table_dimensions(
  table_id = 15,
  dims_list = dims_list,
  con = con
)

# Insert if needed
if (!is.null(dims_to_insert)) {
  # Insert logic here
}
}


}
