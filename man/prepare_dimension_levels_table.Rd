% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_structure.R
\name{prepare_dimension_levels_table}
\alias{prepare_dimension_levels_table}
\title{Prepare ECB dimension levels metadata}
\usage{
prepare_dimension_levels_table(series_key, con, schema = "platform")
}
\arguments{
\item{series_key}{Character. An ECB series key (e.g.,
"ICP.M.U2.N.000000.4.ANR"). The function extracts the dataflow code from
the first part of the key and uses the number of dot-separated values to
determine which dimensions are key dimensions versus attributes.}

\item{con}{Database connection object (e.g., from \code{DBI::dbConnect()}).}

\item{schema}{Character. The database schema name. Default is "platform".}
}
\value{
A data frame with columns \code{tab_dim_id}, \code{level_value},
  and \code{level_text} for dimension levels that need to be inserted.
  Returns \code{NULL} if all dimension levels already exist in the database.
}
\description{
Extracts unique dimension level values from an ECB series key and prompts
the user for descriptions of new levels that don't exist in the database.
Only processes key dimensions (not attributes) by parsing the series key
structure.
}
\details{
The function performs the following steps:
\enumerate{
  \item Calls \code{ecb::get_dimensions()} to retrieve dimension information
  \item Extracts the dataflow code and looks up the corresponding table_id
  \item Identifies which dimension levels already exist in the database
  \item For each new dimension level, prompts the user interactively to
        enter a description. If the user presses Enter without typing, the
        level code is used as the description.
}

The function assumes that table dimensions have already been created via
\code{\link{prepare_table_dimensions_table}}.
}
\examples{
\dontrun{
con <- DBI::dbConnect(...)

# Prepare dimension levels (will prompt for descriptions)
levels_to_insert <- prepare_dimension_levels_table(
  series_key = "ICP.M.U2.N.000000.4.ANR",
  con = con
)

# Insert if needed
if (!is.null(levels_to_insert)) {
  # Insert logic here
}
}


}
